<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seated Chair Massage Intake - Flexion & Flow</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/forms.css">
</head>
<body>
    <div class="container">
        <div class="form-header">
            <img src="/img/flexion-flow-logo.png" alt="Flexion & Flow Logo" class="logo-small">
            <h1>Seated Chair<br>Massage Intake</h1>
        </div>

        <!-- Step Indicator -->
        <div id="stepIndicator" class="step-indicator">
            <div class="step active" data-step="1">
                <span class="step-number">1</span>
                <span class="step-label">Details</span>
            </div>
            <div class="step" data-step="2">
                <span class="step-number">2</span>
                <span class="step-label">Body Map</span>
            </div>
            <div class="step" data-step="3">
                <span class="step-number">3</span>
                <span class="step-label">Today's Focus</span>
            </div>
            <div class="step" data-step="4">
                <span class="step-number">4</span>
                <span class="step-label">Health Check</span>
            </div>
            <div class="step" data-step="5">
                <span class="step-number">5</span>
                <span class="step-label">Preferences</span>
            </div>
            <div class="step" data-step="6">
                <span class="step-number">6</span>
                <span class="step-label">Consent</span>
            </div>
        </div>
        <div id="stepCount" class="step-count" style="text-align:center; margin:12px 0; font-weight:600; color:var(--text-dark);">Step 1 of 6</div>

        <form id="intakeForm" class="intake-form wizard-form">
            <!-- Step 1: Details -->
            <div class="wizard-step form-section" data-step="1">
                <h2>Step 1 — Details</h2>
                <div class="form-group">
                    <label for="fullName">Full Name: <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="mobile">Mobile: <span class="required">*</span></label>
                    <input type="tel" id="mobile" name="mobile" placeholder="e.g., 04xxxxxxxx or +61xxxxxxxxx" required>
                </div>

                <div class="form-group">
                    <label for="email">Email (optional):</label>
                    <input type="email" id="email" name="email">
                </div>
                <div class="form-group">
                    <label>Gender (optional):</label>
                    <div class="radio-group inline">
                        <label><input type="radio" name="gender" value="Male"> Male</label>
                        <label><input type="radio" name="gender" value="Female"> Female</label>
                        <label><input type="radio" name="gender" value="Prefer not to disclose"> Prefer not to disclose</label>
                    </div>
                </div>
            </div>

            <!-- Step 2: Today's focus -->
            <div class="wizard-step form-section" data-step="2">
                <h2>Step 2 — Today's Focus</h2>
                <p class="section-note">Tap the body map to mark areas of discomfort. Tap a dot to remove it.</p>
                <div class="muscle-map-container">
                    <div id="muscleMapContainer"></div>
                    <button type="button" id="clearMuscleMap" class="btn-secondary">Clear</button>
                    <input type="hidden" id="muscleMapMarks" name="muscleMapMarks" value="[]">
                </div>

                <div class="form-group">
                    <label>Pressure Preference: <span class="required">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="pressurePreference" value="Light"> Light</label>
                        <label><input type="radio" name="pressurePreference" value="Medium"> Medium</label>
                        <label><input type="radio" name="pressurePreference" value="Firm"> Firm</label>
                    </div>
                </div>
            </div>

            <!-- Step 3: Quick Health Check -->
            <div class="wizard-step form-section" data-step="3">
                <h2>Step 3 — Quick Health Check</h2>
                <p class="section-note">Tick any that apply. Please discuss flags with your therapist.</p>

                <div class="checkbox-group" id="healthChecksGroup">
                    <label><input type="checkbox" name="healthChecks" value="Pregnant"> Pregnant</label>
                    <label><input type="checkbox" name="healthChecks" value="Recent surgery (last 6 months)"> Recent surgery (last 6 months)</label>
                    <label><input type="checkbox" name="healthChecks" value="Recent injury (last 3 months)"> Recent injury (last 3 months)</label>
                    <label><input type="checkbox" name="healthChecks" value="Heart condition"> Heart condition</label>
                    <label><input type="checkbox" name="healthChecks" value="Pacemaker/implanted device"> Pacemaker/implanted device</label>
                    <label><input type="checkbox" name="healthChecks" value="History of blood clots / DVT"> History of blood clots / DVT</label>
                    <label><input type="checkbox" name="healthChecks" value="On blood thinners"> On blood thinners</label>
                    <label><input type="checkbox" name="healthChecks" value="High blood pressure (uncontrolled)"> High blood pressure (uncontrolled)</label>
                    <label><input type="checkbox" name="healthChecks" value="Diabetes"> Diabetes</label>
                    <label><input type="checkbox" name="healthChecks" value="Skin infection/rash/open wound in areas to be treated"> Skin infection/rash/open wound in areas to be treated</label>
                    <label><input type="checkbox" name="healthChecks" value="Fever / contagious illness today"> Fever / contagious illness today</label>
                    <label><input type="checkbox" name="healthChecks" value="Allergies/sensitivities (balms/oils/fragrances)"> Allergies/sensitivities (balms/oils/fragrances)</label>
                    <label><input type="checkbox" name="healthChecks" value="Numbness/tingling (unexplained)"> Numbness/tingling (unexplained)</label>
                    <label><input type="checkbox" name="healthChecks" value="Dizziness/fainting episodes"> Dizziness/fainting episodes</label>
                    <label><input type="checkbox" name="healthChecks" value="Other health concern"> Other health concern: <input type="text" name="otherHealthConcernText" id="otherHealthConcernText" maxlength="200"></label>
                    <label><input type="checkbox" id="noHealthIssues"> I feel well today / No issues to report</label>
                </div>

                <div id="healthBanner" class="info-box hidden-field" style="background:transparent; border:2px solid #2196F3; margin-top:20px;">
                    <p><strong>Please provide more details:</strong></p>
                    <!-- 'Reviewed by therapist' removed per request -->
                    <div class="form-group" style="margin-top:10px;">
                        <label for="reviewNote">Additional information:</label>
                        <input type="text" id="reviewNote" name="reviewNote" maxlength="200">
                    </div>
                </div>
            </div>

            <!-- Step 4: Anything to avoid -->
            <div class="wizard-step form-section" data-step="4">
                <h2>Step 4 — Anything to avoid?</h2>
                <div class="form-group">
                    <label for="avoidNotes">Anything to avoid? (optional)</label>
                    <textarea id="avoidNotes" name="avoidNotes" rows="1" maxlength="200"></textarea>
                </div>
            </div>

            <!-- Step 5: Consent & Signature -->
            <div class="wizard-step form-section consent-section" data-step="5" style="border:2px solid #2196F3; padding:20px; border-radius:8px;">
                <h2>Step 5 — Consent & Signature</h2>

                <div class="info-box">
                    <p><strong>Notes:</strong></p>
                    <ul>
                        <li>Delivered fully clothed, no oils used.</li>
                        <li>Pressure is adjustable — tell us if you'd like less or more.</li>
                        <li>This is not a substitute for medical treatment.</li>
                        <li>You can stop the session at any time.</li>
                    </ul>
                </div>

                <div style="margin-bottom:12px; display:flex; justify-content:flex-end;">
                    <button type="button" id="viewTermsBtn" class="btn-secondary" aria-label="View Terms and Privacy">View Terms + Privacy</button>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="consentAll" id="consentAll" required>
                        <span>I have read and agree to the Terms and Privacy Collection Notice, I consent to receive seated chair massage today. I understand I can ask to change pressure, pause, or stop at any time, I'm comfortable receiving seated massage in a shared workplace/event setting. <span class="required">*</span></span>
                    </label>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="smsOptIn" id="smsOptIn"> Receive occasional SMS updates
                    </label>
                </div>

                <div class="signature-area">
                    <h2>Please Sign <span class="required">*</span></h2>

                    <div class="signature-methods" style="margin-bottom:8px;">
                        <label style="margin-right:12px"><input type="radio" name="signatureMethod" id="signatureMethodDraw" value="draw" checked> Draw signature</label>
                        <label><input type="radio" name="signatureMethod" id="signatureMethodType" value="type"> Type signature</label>
                    </div>

                    <div class="signature-draw">
                        <div class="signature-container">
                            <canvas id="signatureCanvas" class="signature-pad"></canvas>
                            <button type="button" id="clearSignature" class="btn-secondary">Clear Signature</button>
                        </div>
                    </div>

                    <div class="signature-type" style="display:none; margin-top:8px;">
                        <input type="text" id="typedSignatureInput" placeholder="Type your name here" maxlength="100" style="width:100%; padding:8px; font-size:16px;" />
                        <div id="typedSignaturePreview" class="typed-signature-preview" aria-hidden="true" style="margin-top:8px; font-family: 'Segoe Script', 'Brush Script MT', cursive; font-size:32px; color:#000;"></div>
                        <button type="button" id="clearTypedSignature" class="btn-secondary" style="margin-top:8px;">Clear Typed</button>
                    </div>

                    <input type="hidden" id="signatureData" name="signature">
                    <input type="hidden" id="signedAt" name="signedAt">
                </div>
            </div>

            <!-- Step 6: Marketing Opt-in -->
            <div class="wizard-step form-section" data-step="6">
                <h2>Step 6 — Optional Marketing Opt-in</h2>
                <div class="consent-checkbox">
                    <label><input type="checkbox" name="emailOptIn" id="emailOptIn"> Receive occasional email updates</label>
                </div>
            </div>

            <!-- Sticky Action Bar (wizard controls) -->
            <div class="form-actions sticky-actions" style="align-items:center;">
                <button type="button" id="prevBtn" class="btn-secondary">Back</button>
                <button type="button" id="nextBtn" class="btn-primary">Next</button>
                <button type="submit" id="submitBtn" class="btn-primary" style="display:none;">Submit Intake</button>
            </div>
        </form>
    </div>

    <script src="/js/signature.js"></script>
    <script src="/js/muscleMap.js"></script>
    <script src="/js/conditionalFields.js"></script>
    <script src="/js/healthDisclaimers.js"></script>
    <script src="/js/wizard.js"></script>
    
    <!-- Terms + Privacy Modal -->
    <div id="termsModal" class="terms-modal hidden-field" role="dialog" aria-modal="true" aria-labelledby="termsModalTitle">
        <div class="terms-backdrop"></div>
        <div class="terms-content" role="document">
            <div class="terms-header">
                <h2 id="termsModalTitle">Terms and Privacy</h2>
                <button type="button" id="closeTermsBtn" class="btn-secondary" aria-label="Close Terms">Close</button>
            </div>
            <div class="terms-body">
                <pre style="white-space:pre-wrap;">TERMS AND PRIVACY

1) What this service is
This is seated chair massage provided fully clothed. It is intended to support relaxation, comfort, and general musculoskeletal tension relief. It is not a medical diagnosis or a substitute for medical care.

2) Your responsibilities
Please provide accurate information about your health, injuries, medications, allergies/sensitivities, and any recent changes in symptoms. If you are unsure whether massage is suitable for you, please discuss this with the therapist before treatment.

3) Consent and communication
You can ask to change pressure, adjust areas treated, pause, or stop at any time. Please tell the therapist immediately if you feel pain, dizziness, nausea, numbness/tingling, shortness of breath, or discomfort.

4) When massage may be modified or declined
Massage may be modified or declined if it is not safe or appropriate on the day (for example, if you are unwell with fever/contagious symptoms, have an open wound or skin infection in the treatment area, or have new or unexplained symptoms). If there is a safety concern, the therapist may recommend you seek advice from a GP or relevant health professional.

5) Possible effects and risks
Massage is generally low risk, but possible effects can include temporary tenderness, light-headedness, fatigue, or mild soreness. Rarely, symptoms may be aggravated. Outcomes can vary and no specific result can be guaranteed.

6) Privacy - what we collect and why
We collect personal information (such as your name and contact details) and health information (such as screening responses) to provide the service safely and to create a treatment record (PDF). We take reasonable steps to protect your information from misuse, interference, loss, and unauthorised access or disclosure.

7) Storage and access
Your intake is stored as a PDF record. You may request access to your information using the contact details provided by the therapist.

8) Marketing (optional)
Marketing messages are only sent if you opt in. You can opt out at any time.

9) Australian Consumer Law
Nothing in these terms is intended to exclude, restrict, or modify any rights you may have under the Australian Consumer Law, including consumer guarantees that cannot be excluded.

10) Acknowledgement
By accepting these terms and providing consent, you confirm you have read and understood this information and have had the opportunity to ask questions before treatment.
</pre>
            </div>
        </div>
    </div>

    <script src="/js/termsModal.js"></script>
    <script src="/js/intake-form.js"></script>
</body>
</html>
