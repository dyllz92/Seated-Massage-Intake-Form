<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Massage Intake Form - Flexion & Flow</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/forms.css">
</head>
<body>
    <div class="container">
        <div class="form-header">
            <img src="/Flexioin & Flow Logo.svg" alt="Flexion & Flow Logo" class="logo-small">
            <h1>Seated Chair Massage</h1>
            <p class="subtitle">Client Intake Form</p>
        </div>

        <form id="intakeForm" class="intake-form">
            <!-- Client Details -->
            <section class="form-section">
                <h2>Your Information</h2>
                
                <div class="form-group">
                    <label for="fullName">Full Name: <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone: <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="dob">Date of Birth: <span class="required">*</span></label>
                    <input type="date" id="dob" name="dob" required>
                </div>

                <div class="form-group">
                    <label>Gender: <span class="required">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="gender" value="Male" required> Male</label>
                        <label><input type="radio" name="gender" value="Female"> Female</label>
                        <label><input type="radio" name="gender" value="Non-binary"> Non-binary</label>
                        <label><input type="radio" name="gender" value="Prefer not to disclose"> Prefer not to disclose</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="emergencyContact">Emergency Contact: <span class="required">*</span></label>
                    <input type="text" id="emergencyContact" name="emergencyContact" placeholder="Name and phone number">
                </div>
            </section>

            <!-- Areas of Discomfort -->
            <section class="form-section">
                <h2>Where do you need help today?</h2>
                <p class="section-note">Click on areas where you feel discomfort</p>
                
                <div class="muscle-map-container">
                    <div id="muscleMapContainer"></div>
                    <button type="button" id="clearMuscleMap" class="btn-secondary">Clear</button>
                    <input type="hidden" id="muscleMapMarks" name="muscleMapMarks" value="[]">
                </div>
            </section>

            <!-- Treatment Preferences -->
            <section class="form-section">
                <h2>Treatment Preferences</h2>
                
                <div class="form-group">
                    <label>Pressure Preference: <span class="required">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="pressure" value="Light" required> Light</label>
                        <label><input type="radio" name="pressure" value="Medium"> Medium</label>
                        <label><input type="radio" name="pressure" value="Deep"> Deep</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="areasAvoid">Any areas to avoid?</label>
                    <input type="text" id="areasAvoid" name="areasAvoid" placeholder="e.g., right shoulder injury">
                </div>
            </section>

            <!-- Health Screening -->
            <section class="form-section alert-section">
                <h2>Health & Safety</h2>
                <p class="section-note">Please let us know about any of the following:</p>
                
                <div class="checkbox-group">
                    <label><input type="checkbox" name="healthIssue" value="Pregnancy"> Currently pregnant</label>
                    <label><input type="checkbox" name="healthIssue" value="Recent surgery"> Recent surgery or open wounds (last 3 months)</label>
                    <label><input type="checkbox" name="healthIssue" value="Fever/infection"> Fever, flu, or contagious condition</label>
                    <label><input type="checkbox" name="healthIssue" value="Skin condition"> Skin condition or infection</label>
                    <label><input type="checkbox" name="healthIssue" value="Heart condition"> Heart condition or high blood pressure</label>
                    <label><input type="checkbox" name="healthIssue" value="Cancer"> Cancer (current or recent treatment)</label>
                    <label><input type="checkbox" name="healthIssue" value="Severe osteoporosis"> Severe osteoporosis or bone fragility</label>
                    <label><input type="checkbox" name="healthIssue" value="Blood thinners"> Taking blood thinning medication</label>
                    <label><input type="checkbox" name="healthIssue" value="Other"> Other health condition</label>
                </div>

                <div id="healthDetailsContainer" class="conditional-container hidden-field">
                    <div class="form-group">
                        <label for="healthDetails">Please describe:</label>
                        <textarea id="healthDetails" name="healthDetails" rows="2" placeholder="Details about your health condition..."></textarea>
                    </div>
                </div>
            </section>

            <!-- Medications & Allergies -->
            <section class="form-section">
                <h2>Medications & Allergies</h2>
                
                <div class="form-group">
                    <label for="medications">Current medications (especially blood thinners):</label>
                    <textarea id="medications" name="medications" rows="2" placeholder="List any medications you're taking..."></textarea>
                </div>

                <div class="form-group">
                    <label for="allergies">Allergies (oils, lotions, latex):</label>
                    <input type="text" id="allergies" name="allergies" placeholder="Any allergies we should know about?">
                </div>
            </section>

            <!-- Consent -->
            <section class="form-section consent-section">
                <h2>Consent & Agreement</h2>
                
                <div class="info-box">
                    <p><strong>Before your massage:</strong></p>
                    <ul>
                        <li>Massage is delivered fully clothed, no oils used</li>
                        <li>Pressure is adjustable - tell us if you'd like less or more</li>
                        <li>This is not a substitute for medical treatment</li>
                        <li>You can stop the session at any time</li>
                    </ul>
                </div>

                <div class="info-box" style="margin-top: 12px;">
                    <p><strong>Privacy Notice:</strong></p>
                    <ul>
                        <li>Your information is used only for providing massage services today.</li>
                        <li>Upon submission, a PDF of this form is securely stored in a private Google Drive folder.</li>
                        <li>No local database is used; data is not retained on the server beyond generating the PDF.</li>
                        <li>Use of HTTPS or a secure tunnel (e.g., ngrok/Cloudflare) is recommended for encrypted transmission.</li>
                    </ul>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="consentAccurate" id="consentAccurate" required>
                        <span>I confirm the information above is accurate <span class="required">*</span></span>
                    </label>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="consentTreatment" id="consentTreatment" required>
                        <span>I consent to receive massage today <span class="required">*</span></span>
                    </label>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="consentUnderstand" id="consentUnderstand" required>
                        <span>I understand I can stop at any time <span class="required">*</span></span>
                    </label>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="privacyConsent">
                        <span>I consent to my information being stored securely (optional)</span>
                    </label>
                </div>
            </section>

            <!-- Signature -->
            <section class="form-section">
                <h2>Signature</h2>
                <div class="signature-container">
                    <canvas id="signatureCanvas" class="signature-pad"></canvas>
                    <button type="button" id="clearSignature" class="btn-secondary">Clear Signature</button>
                </div>
                <input type="hidden" id="signatureData" name="signature" required>
                
                <div class="form-group">
                    <label for="signatureDate">Date: <span class="required">*</span></label>
                    <input type="date" id="signatureDate" name="signatureDate" required>
                </div>
            </section>

            <!-- Submit -->
            <div class="form-actions">
                <button type="submit" class="btn-primary">Complete & Submit</button>
            </div>
        </form>
    </div>

    <script src="/js/signature.js"></script>
    <script src="/js/muscleMap.js"></script>
    <script src="/js/conditionalFields.js"></script>
    <script src="/js/intake-form.js"></script>
</body>
</html>
