<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seated Chair Massage Intake - Flexion & Flow</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/forms.css">
</head>
<body>
    <div class="container">
        <div class="form-header">
            <img src="/Flexion and Flow Logo.png" alt="Flexion & Flow Logo" class="logo-small">
            <h1>Seated Chair Massage Intake</h1>
            <p class="subtitle">Single universal form (mobile-friendly)</p>
        </div>

        <form id="intakeForm" class="intake-form">
            <!-- A. Details -->
            <section class="form-section">
                <h2>Details</h2>
                
                <div class="form-group">
                    <label for="fullName">Full Name: <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="mobile">Mobile: <span class="required">*</span></label>
                    <input type="tel" id="mobile" name="mobile" pattern="^(\+?61|0)[2-478][0-9]{8}$" placeholder="e.g., 04xxxxxxxx or +61xxxxxxxxx" required>
                </div>

                <div class="form-group">
                    <label for="email">Email (optional):</label>
                    <input type="email" id="email" name="email">
                </div>

                <div class="form-group">
                    <label>Company/Team:</label>
                    <div class="radio-group">
                        <label><input type="radio" name="companyTeam" value="Well Corp"> Well Corp</label>
                        <label><input type="radio" name="companyTeam" value="Hemisphere"> Hemisphere</label>
                        <label><input type="radio" name="companyTeam" value="AO"> AO</label>
                        <label><input type="radio" name="companyTeam" value="Other"> Other: <input type="text" name="companyTeamOther" id="companyTeamOther" maxlength="60"></label>
                    </div>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="ageConfirm18Plus" id="ageConfirm18Plus" required>
                        <span>I confirm I am 18 years or older <span class="required">*</span></span>
                    </label>
                </div>
            </section>

            <!-- C. Body Map (unchanged) -->
            <section class="form-section">
                <h2>Body Map</h2>
                <p class="section-note">Tap areas to mark discomfort. Tap a dot to remove.</p>
                
                <div class="muscle-map-container">
                    <div id="muscleMapContainer"></div>
                    <button type="button" id="clearMuscleMap" class="btn-secondary">Clear</button>
                    <input type="hidden" id="muscleMapMarks" name="muscleMapMarks" value="[]">
                </div>
            </section>

            <!-- E. Today’s Focus -->
            <section class="form-section">
                <h2>Today's Focus</h2>
                
                <div class="form-group">
                    <label>Reasons today (select any):</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="reasonsToday" value="Neck/shoulder tension"> Neck/shoulder tension</label>
                        <label><input type="checkbox" name="reasonsToday" value="Upper back tightness"> Upper back tightness</label>
                        <label><input type="checkbox" name="reasonsToday" value="Stress/anxiety"> Stress/anxiety</label>
                        <label><input type="checkbox" name="reasonsToday" value="Forearm/wrist/hand tightness"> Forearm/wrist/hand tightness</label>
                        <label><input type="checkbox" name="reasonsToday" value="Posture fatigue"> Posture fatigue</label>
                        <label><input type="checkbox" name="reasonsToday" value="General tension"> General tension</label>
                        <label><input type="checkbox" name="reasonsToday" value="Event/work fatigue"> Event/work fatigue</label>
                        <label><input type="checkbox" name="reasonsToday" value="Headache support"> Headache support</label>
                        <label><input type="checkbox" name="reasonsToday" value="Other"> Other: <input type="text" name="reasonsOtherText" id="reasonsOtherText" maxlength="200"></label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Areas to focus (select any):</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="focusAreas" value="Neck"> Neck</label>
                        <label><input type="checkbox" name="focusAreas" value="Shoulders"> Shoulders</label>
                        <label><input type="checkbox" name="focusAreas" value="Upper back"> Upper back</label>
                        <label><input type="checkbox" name="focusAreas" value="Mid back"> Mid back</label>
                        <label><input type="checkbox" name="focusAreas" value="Arms"> Arms</label>
                        <label><input type="checkbox" name="focusAreas" value="Forearms"> Forearms</label>
                        <label><input type="checkbox" name="focusAreas" value="Hands"> Hands</label>
                        <label><input type="checkbox" name="focusAreas" value="Lower back (light only)"> Lower back (light only)</label>
                        <label><input type="checkbox" name="focusAreas" value="Other"> Other: <input type="text" name="focusOtherText" id="focusOtherText" maxlength="200"></label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Areas to avoid (select any):</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="avoidAreas" value="Neck"> Neck</label>
                        <label><input type="checkbox" name="avoidAreas" value="Shoulders"> Shoulders</label>
                        <label><input type="checkbox" name="avoidAreas" value="Upper back"> Upper back</label>
                        <label><input type="checkbox" name="avoidAreas" value="Arms"> Arms</label>
                        <label><input type="checkbox" name="avoidAreas" value="Forearms"> Forearms</label>
                        <label><input type="checkbox" name="avoidAreas" value="Hands"> Hands</label>
                        <label><input type="checkbox" name="avoidAreas" value="Lower back"> Lower back</label>
                        <label><input type="checkbox" name="avoidAreas" value="Any recent injury area"> Any recent injury area</label>
                        <label><input type="checkbox" name="avoidAreas" value="Other"> Other: <input type="text" name="avoidOtherText" id="avoidOtherText" maxlength="200"></label>
                    </div>
                </div>
            </section>

            <!-- D. Quick Health Check -->
            <section class="form-section alert-section">
                <h2>Quick Health Check</h2>
                <p class="section-note">Tick any that apply. If any are ticked, a banner will appear to check with the therapist.</p>
                
                <div class="checkbox-group">
                    <label><input type="checkbox" name="healthChecks" value="Pregnant"> Pregnant</label>
                    <label><input type="checkbox" name="healthChecks" value="Recent surgery (last 6 months)"> Recent surgery (last 6 months)</label>
                    <label><input type="checkbox" name="healthChecks" value="Recent injury (last 3 months)"> Recent injury (last 3 months)</label>
                    <label><input type="checkbox" name="healthChecks" value="Heart condition"> Heart condition</label>
                    <label><input type="checkbox" name="healthChecks" value="Pacemaker/implanted device"> Pacemaker/implanted device</label>
                    <label><input type="checkbox" name="healthChecks" value="History of blood clots / DVT"> History of blood clots / DVT</label>
                    <label><input type="checkbox" name="healthChecks" value="On blood thinners"> On blood thinners</label>
                    <label><input type="checkbox" name="healthChecks" value="High blood pressure (uncontrolled)"> High blood pressure (uncontrolled)</label>
                    <label><input type="checkbox" name="healthChecks" value="Diabetes"> Diabetes</label>
                    <label><input type="checkbox" name="healthChecks" value="Cancer - current treatment"> Cancer - current treatment</label>
                    <label><input type="checkbox" name="healthChecks" value="Osteoporosis / fragile bones"> Osteoporosis / fragile bones</label>
                    <label><input type="checkbox" name="healthChecks" value="Epilepsy / seizures"> Epilepsy / seizures</label>
                    <label><input type="checkbox" name="healthChecks" value="Skin infection/rash/open wound in areas to be treated"> Skin infection/rash/open wound in areas to be treated</label>
                    <label><input type="checkbox" name="healthChecks" value="Fever / contagious illness today"> Fever / contagious illness today</label>
                    <label><input type="checkbox" name="healthChecks" value="Allergies/sensitivities (balms/oils/fragrances)"> Allergies/sensitivities (balms/oils/fragrances)</label>
                    <label><input type="checkbox" name="healthChecks" value="Numbness/tingling (unexplained)"> Numbness/tingling (unexplained)</label>
                    <label><input type="checkbox" name="healthChecks" value="Dizziness/fainting episodes"> Dizziness/fainting episodes</label>
                    <label><input type="checkbox" name="healthChecks" value="Other health concern"> Other health concern: <input type="text" name="otherHealthConcernText" id="otherHealthConcernText" maxlength="200"></label>
                </div>

                <div id="healthBanner" class="info-box hidden-field" style="background:#fff1f1; border-left-color:#e74c3c;">
                    <p><strong>May not be suitable today - please check with the therapist.</strong></p>
                    <label style="display:block; margin-top:8px;">
                        <input type="checkbox" name="reviewedByTherapist" id="reviewedByTherapist">
                        <span>Reviewed by therapist</span>
                    </label>
                    <div class="form-group" style="margin-top:10px;">
                        <label for="reviewNote">Optional note:</label>
                        <input type="text" id="reviewNote" name="reviewNote" maxlength="200">
                    </div>
                </div>
            </section>

            <!-- F. Preferences -->
            <section class="form-section">
                <h2>Preferences</h2>
                
                <div class="form-group">
                    <label>Pressure Preference: <span class="required">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="pressurePreference" value="Light" required> Light</label>
                        <label><input type="radio" name="pressurePreference" value="Medium"> Medium</label>
                        <label><input type="radio" name="pressurePreference" value="Firm"> Firm</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Work-related injury:</label>
                    <div class="radio-group inline">
                        <label><input type="radio" name="workRelatedInjury" value="No"> No</label>
                        <label><input type="radio" name="workRelatedInjury" value="Yes"> Yes</label>
                    </div>
                </div>
            </section>

            <!-- B. Consent & Signature -->
            <section class="form-section consent-section">
                <h2>Consent & Signature</h2>
                
                <div class="info-box">
                    <p><strong>Notes:</strong></p>
                    <ul>
                        <li>Delivered fully clothed, no oils used.</li>
                        <li>Pressure is adjustable — tell us if you'd like less or more.</li>
                        <li>This is not a substitute for medical treatment.</li>
                        <li>You can stop the session at any time.</li>
                    </ul>
                </div>

                <div class="info-box" style="margin-top: 12px;">
                    <p><strong>Privacy:</strong></p>
                    <ul>
                        <li>A PDF copy of your form is stored securely in a private Google Drive folder.</li>
                        <li>The server does not retain your data beyond generating the PDF.</li>
                        <li>Use HTTPS or a secure tunnel (e.g., ngrok/Cloudflare) for encrypted transmission.</li>
                    </ul>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="consentGiven" id="consentGiven" required>
                        <span>I consent to receive seated chair massage today <span class="required">*</span></span>
                    </label>
                </div>

                <div class="signature-container">
                    <canvas id="signatureCanvas" class="signature-pad"></canvas>
                    <button type="button" id="clearSignature" class="btn-secondary">Clear Signature</button>
                </div>
                <input type="hidden" id="signatureData" name="signature" required>
                <input type="hidden" id="signedAt" name="signedAt">
            </section>

            <!-- G. Optional Notes -->
            <section class="form-section">
                <h2>Optional Notes</h2>
                <div class="form-group">
                    <label for="notes">Anything important to know (optional):</label>
                    <textarea id="notes" name="notes" rows="2" maxlength="200" placeholder="Up to 200 characters"></textarea>
                </div>
            </section>

            <!-- H. Marketing Opt-in (optional) -->
            <section class="form-section">
                <h2>Marketing Opt-in (optional)</h2>
                <div class="consent-checkbox">
                    <label><input type="checkbox" name="emailOptIn"> Receive occasional email updates</label>
                </div>
                <div class="consent-checkbox">
                    <label><input type="checkbox" name="smsOptIn"> Receive occasional SMS updates</label>
                </div>
            </section>

            <!-- Sticky Action Bar -->
            <div class="form-actions sticky-actions">
                <button type="button" id="declineBtn" class="btn-secondary">Decline / Not Treated</button>
                <button type="submit" id="submitBtn" class="btn-primary" disabled>Submit Intake</button>
            </div>
        </form>
    </div>

    <script src="/js/signature.js"></script>
    <script src="/js/muscleMap.js"></script>
    <script src="/js/conditionalFields.js"></script>
    <script src="/js/intake-form.js"></script>
</body>
</html>
