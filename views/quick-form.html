<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Intake - Flexion & Flow</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/forms.css">
</head>
<body>
    <div class="container">
        <div class="form-header">
            <img src="/img/flexion-flow-logo.png" alt="Flexion & Flow Logo" class="logo-small">
            <h1>Seated Chair Massage</h1>
            <p class="subtitle">Quick 60-Second Form</p>
        </div>

        <form id="quickForm" class="intake-form">
            <!-- Basic Information -->
            <section class="form-section">
                <h2>Basic Information</h2>
                
                <div class="form-group">
                    <label for="name">Name: <span class="required">*</span></label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="mobile">Mobile: <span class="required">*</span></label>
                    <input type="tel" id="mobile" name="mobile" required>
                </div>

                <div class="form-group">
                    <label>Gender: <span class="required">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="gender" value="Male" required> Male</label>
                        <label><input type="radio" name="gender" value="Female"> Female</label>
                        <label><input type="radio" name="gender" value="Non-binary"> Non-binary</label>
                        <label><input type="radio" name="gender" value="Prefer not to disclose"> Prefer not to disclose</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="company">Company/Team: <span class="required">*</span></label>
                    <input type="text" id="company" name="company" maxlength="60" placeholder="e.g., Well Corp, Hemisphere, AO" required>
                </div>
            </section>

            <!-- Treatment Details -->
            <section class="form-section">
                <h2>What do you want help with today?</h2>
                <p class="section-note">Click on areas where you feel discomfort OR tick up to 2 areas below</p>
                
                <div class="muscle-map-container">
                    <canvas id="muscleMapCanvas" class="muscle-map-canvas"></canvas>
                    <button type="button" id="clearMuscleMap" class="btn-secondary">Clear Muscle Map</button>
                    <input type="hidden" id="muscleMapMarks" name="muscleMapMarks" value="[]">
                </div>

                <div style="margin: 20px 0;">
                    <p class="section-note">Or select areas below:</p>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="treatmentArea" value="Neck"> Neck</label>
                        <label><input type="checkbox" name="treatmentArea" value="Shoulders"> Shoulders</label>
                        <label><input type="checkbox" name="treatmentArea" value="Upper back"> Upper back</label>
                        <label><input type="checkbox" name="treatmentArea" value="Lower back"> Lower back</label>
                        <label><input type="checkbox" name="treatmentArea" value="Arms-hands"> Arms-hands</label>
                        <label><input type="checkbox" name="treatmentArea" value="Head-jaw"> Head-jaw</label>
                        <label><input type="checkbox" name="treatmentArea" value="Stress"> Stress</label>
                        <label><input type="checkbox" name="treatmentArea" value="Other"> Other: <input type="text" name="treatmentAreaOther"></label>
                    </div>
                </div>
            </section>

            <section class="form-section">
                <div class="form-group">
                    <label for="areasToAvoid">Any areas to avoid?</label>
                    <input type="text" id="areasToAvoid" name="areasToAvoid">
                </div>

                <div class="form-group">
                    <label for="pressure">Pressure: <span class="required">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="pressure" value="Light" required> Light</label>
                        <label><input type="radio" name="pressure" value="Medium"> Medium</label>
                        <label><input type="radio" name="pressure" value="Firm"> Firm</label>
                    </div>
                </div>
            </section>

            <!-- Health Screening -->
            <section class="form-section">
                <h2>Any of these apply today?</h2>
                <p class="section-note">Tick any that apply</p>
                
                <div class="checkbox-group">
                    <label><input type="checkbox" name="healthCondition" value="Sick/feverish"> I'm sick/feverish</label>
                    <label><input type="checkbox" name="healthCondition" value="Recent injury or surgery"> Recent injury or surgery (last 3 months)</label>
                    <label><input type="checkbox" name="healthCondition" value="Taking blood thinners"> Taking blood thinners</label>
                    <label><input type="checkbox" name="healthCondition" value="Heart condition/pacemaker"> Heart condition/pacemaker</label>
                    <label><input type="checkbox" name="healthCondition" value="Pregnant"> Pregnant</label>
                    <label><input type="checkbox" name="healthCondition" value="Skin infection/open wound"> Skin infection/open wound in the treatment area</label>
                    <label><input type="checkbox" name="healthCondition" value="Numbness/pins and needles"> Numbness/pins and needles</label>
                    <label><input type="checkbox" name="healthCondition" value="None"> None of the above</label>
                </div>
            </section>

            <section class="form-section">
                <div class="form-group">
                    <label for="additionalInfo">Anything important I should know before we start? (optional)</label>
                    <textarea id="additionalInfo" name="additionalInfo" rows="3"></textarea>
                </div>
            </section>

            <!-- Consent -->
            <section class="form-section consent-section">
                <h2>Consent</h2>
                
                <div class="info-box">
                    <p><strong>Privacy Notice:</strong></p>
                    <ul>
                        <li>Your information is used only for your massage session today.</li>
                        <li>On submit, a PDF is securely stored in a private Google Drive folder.</li>
                        <li>No local database is used; the server does not retain your data after generating the PDF.</li>
                        <li>Use HTTPS or a secure tunnel (e.g., ngrok/Cloudflare) for encrypted transmission.</li>
                    </ul>
                </div>

                <div class="consent-checkbox">
                    <label>
                        <input type="checkbox" name="consent" id="consent" required>
                        <span>I confirm the info is correct and I consent to seated chair massage today. <span class="required">*</span></span>
                    </label>
                </div>
            </section>

            <!-- Signature -->
            <section class="form-section">
                <h2>Signature <span class="required">*</span></h2>
                <div class="signature-area">
                    <h3>Please Sign <span class="required">*</span></h3>

                    <div class="signature-methods" style="margin-bottom:8px;">
                        <label style="margin-right:12px"><input type="radio" name="signatureMethod" id="signatureMethodDraw" value="draw" checked> Draw signature</label>
                        <label><input type="radio" name="signatureMethod" id="signatureMethodType" value="type"> Type signature</label>
                    </div>

                    <div class="signature-draw">
                        <div class="signature-container">
                            <div class="signature-pad-frame">
                                <canvas id="signatureCanvas" class="signature-pad"></canvas>
                                <div id="typedOverlay" class="typed-overlay" aria-hidden="true"></div>
                            </div>
                            <button type="button" id="clearSignature" class="btn-secondary">Clear Signature</button>
                        </div>
                    </div>

                    <div class="signature-type" style="display:none; margin-top:8px;">
                        <input type="text" id="typedSignatureInput" placeholder="Type your name here" maxlength="100" style="width:100%; padding:8px; font-size:16px;" />
                        <button type="button" id="clearTypedSignature" class="btn-secondary" style="margin-top:8px;">Clear Typed</button>
                    </div>

                    <input type="hidden" id="signatureData" name="signature" required>
                </div>
            </section>

            <div class="form-actions">
                <button type="button" onclick="window.location.href='/'" class="btn-secondary">Back</button>
                <button type="submit" class="btn-primary">Submit Form</button>
            </div>
        </form>
    </div>

    <script src="/js/signature.js"></script>
    <script src="/js/muscleMap.js"></script>
    <script src="/js/quick-form.js"></script>
</body>
</html>
